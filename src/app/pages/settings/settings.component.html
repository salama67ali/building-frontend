<div class="settings-container">
  <h1>Settings</h1>
  
  <mat-card class="settings-section" *ngIf="!isLoading; else loading">
    <mat-card-header>
      <mat-card-title>Notification Preferences</mat-card-title>
      <mat-card-subtitle>Customize how you receive notifications</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="notificationForm" (ngSubmit)="saveNotificationSettings()">
        <div class="form-group">
          <mat-slide-toggle formControlName="emailNotifications">
            Email Notifications
          </mat-slide-toggle>
          <p class="hint">Receive important updates via email</p>
        </div>

        <div class="form-group">
          <mat-slide-toggle formControlName="pushNotifications">
            Push Notifications
          </mat-slide-toggle>
          <p class="hint">Get real-time updates on your device</p>
        </div>

        <div class="form-group">
          <mat-slide-toggle formControlName="applicationUpdates">
            Application Status Updates
          </mat-slide-toggle>
          <p class="hint">Get notified about your application status changes</p>
        </div>

        <div class="form-group">
          <mat-slide-toggle formControlName="deadlineReminders">
            Deadline Reminders
          </mat-slide-toggle>
          <p class="hint">Remind me about upcoming deadlines</p>
        </div>

        <div class="form-group">
          <mat-slide-toggle formControlName="newsletter">
            Newsletter
          </mat-slide-toggle>
          <p class="hint">Receive our monthly newsletter with updates and tips</p>
        </div>

        <div class="form-actions">
          <button 
            mat-raised-button 
            color="primary" 
            type="submit"
            [disabled]="notificationForm.pristine || notificationForm.invalid">
            Save Notification Settings
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-card class="settings-section">
    <mat-card-header>
      <mat-card-title>Privacy Settings</mat-card-title>
      <mat-card-subtitle>Control your privacy preferences</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="privacyForm" (ngSubmit)="savePrivacySettings()">
        <div class="form-group">
          <mat-form-field appearance="outline">
            <mat-label>Profile Visibility</mat-label>
            <mat-select formControlName="profileVisibility">
              <mat-option value="public">Public</mat-option>
              <mat-option value="private">Private</mat-option>
            </mat-select>
          </mat-form-field>
          <p class="hint">Control who can see your profile</p>
        </div>

        <div class="form-group">
          <mat-slide-toggle formControlName="showEmail">
            Show Email Address
          </mat-slide-toggle>
          <p class="hint">Make your email visible to other users</p>
        </div>

        <div class="form-group">
          <mat-slide-toggle formControlName="showPhone">
            Show Phone Number
          </mat-slide-toggle>
          <p class="hint">Make your phone number visible to other users</p>
        </div>

        <div class="form-group">
          <mat-slide-toggle formControlName="showCompany">
            Show Company Information
          </mat-slide-toggle>
          <p class="hint">Display your company details on your profile</p>
        </div>

        <div class="form-actions">
          <button 
            mat-raised-button 
            color="primary" 
            type="submit"
            [disabled]="privacyForm.pristine || privacyForm.invalid">
            Save Privacy Settings
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-card class="settings-section">
    <mat-card-header>
      <mat-card-title>Appearance</mat-card-title>
      <mat-card-subtitle>Customize the look and feel</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="appearance-options">
        <div class="theme-toggle">
          <span>Theme: {{ currentTheme === 'light' ? 'Light' : 'Dark' }}</span>
          <button 
            mat-stroked-button 
            (click)="toggleTheme()"
            [class.active]="currentTheme === 'dark'"
            aria-label="Toggle theme">
            <mat-icon>{{ currentTheme === 'light' ? 'dark_mode' : 'light_mode' }}</mat-icon>
            {{ currentTheme === 'light' ? 'Switch to Dark Mode' : 'Switch to Light Mode' }}
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="settings-section danger-zone">
    <mat-card-header>
      <mat-card-title>Account</mat-card-title>
      <mat-card-subtitle>Manage your account settings</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="account-actions">
        <button 
          mat-stroked-button 
          color="primary" 
          (click)="changePassword()">
          <mat-icon>lock_reset</mat-icon>
          Change Password
        </button>

        <button 
          mat-stroked-button 
          color="warn" 
          class="delete-account">
          <mat-icon>delete_forever</mat-icon>
          Delete Account
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<ng-template #loading>
  <div class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading your settings...</p>
  </div>
</ng-template>
